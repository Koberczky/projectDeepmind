<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
	<link rel="stylesheet" src="css/bootstrap.min.css" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<!-- <link href='http://fonts.googleapis.com/css?family=Convergence|Bitter|Droid+Sans|Ubuntu+Mono' rel='stylesheet' type='text/css' /> -->
	<script type="text/javascript" src="js/gmaps.js"></script>
	<script type="text/javascript" src="js/makeRequest.js"></script>
	<script type="text/javascript" src="js/jQuery.js"></script>
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>
	<body>
		<div id="json"></div>
		<div id="map-canvas"></div>
		<script type="text/javascript">
		jQuery(document).ready(function($){
			makeRequest(drawBuildings);
			var path =
				[[38.8933501072404,-89.41022515296936],
				[38.893300004672454,-89.41023722290998],
				[38.89324572685059,-89.41022783517838],
				[38.89324781445989,-89.40995961427694],
				[38.89335323864974,-89.40995693206793],
				[38.8933501072404,-89.41022515296936],
				[38.8933501072404,-89.41022515296936]];
			var map;
				map = new GMaps({
					el: '#map-canvas',
					lat: 38.8940799,
					lng: -89.4092642,
					zoom: 17,
					MapTypeId: google.maps.MapTypeId.HYBRID,
					zoomControl : true,
					zoomControlOpt: {
						style : 'SMALL',
						position: 'TOP_LEFT'
					},
				panControl : false,
				streetViewControl : false,
				mapTypeControl: true,
				overviewMapControl: true
				});
				var GeoMarker = new GeolocationMarker(map);
				function drawBuildings(data){
				data.contentlets.forEach(function(building){
				if (building.title == "The Gullies" || building.title == "Scott Field")
				{
				}
				else{
				var x = building.latlongcsv;
				var patharray = x.split(';');
				patharray.splice(-1,1);
				i=0;
				while (patharray.length > i){
					patharray[i] = patharray[i].split(',');
					i++;
					}
				polygon = map.drawPolygon({
					paths: patharray,
					strokeOpacity: 1,
					strokeColor: '#4494c3',
					strokeWeight: 3,
					fillColor: '#BBD8E9',
					fillOpacity: 0.6,
					zIndex: 999
				});
				}
				});
				
				}
			});
		</script>
	</body>
</html>
